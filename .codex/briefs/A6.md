# A6 Alignment Brief

## Intent
- Integrate TS and Rust vector runners into CI for every PR and main branch push.
- Guarantee conformance regressions fail CI before merge, preserving cross-runtime determinism.

## Derived Constraints (binding)
- `.github/workflows/conformance.yml` triggers on `pull_request` and push to `main`.
- Workflow lints vectors (version "L0", pointers start with "/", HALT leaves final state in r0).
- Workflow caches `pnpm` and `cargo` dependencies.
- Runs `pnpm -C packages/tf-lang-l0-ts vectors` and `cargo test --manifest-path packages/tf-lang-l0-rs/Cargo.toml`.
- Vector outputs are echoed and uploaded as an artifact for debugging.
- CI fails if any vector mismatches delta/effect or tests error.

## Invariants & Oracles
- Both runners execute in CI and report âœ“ for all vectors on success.
- PRs and main builds show conformance job status.

## Checklist for Coder
- [ ] Mirrors TS and Rust
- [ ] Uses canonical bytes (no JSON.stringify)
- [ ] Final state ends in r0 (N/A)
- [ ] JSON Pointers start with "/" (N/A)
- [ ] Effects NF sorted unique
- [ ] Proof tags emitted when DEV_PROOFS=1 (if relevant)

## Lessons referenced
- A1: canonicalization rules
- A2: cross-runtime hashing
- A3: vector composition
- A4: TS runner
- A5: Rust runner
