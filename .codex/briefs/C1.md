# C1 Alignment Brief

## Intent
- Provide a minimal HTTP host (`services/host-lite-ts/`) enabling world management via canonical L0 semantics.
- Support round-trip state transitions with journaling and optional proof tags.

## Derived Constraints (binding)
- Endpoints: POST /worlds, GET /worlds, POST /plan, POST /apply, POST /rewind, GET /journal/:id.
- All request/response bodies are canonical JSON; hashes via BLAKE3 where ids are derived.
- Journal records include canonical hashes and, when DEV_PROOFS=1, proof tags.
- Host maintains in-memory store; no persistence required beyond process lifetime.

## Invariants & Oracles
- Curl-based round-trip: create world, apply plan, rewind, and fetch journal successfully.
- Requests with floats or invalid pointers are rejected with appropriate error codes (e.g., E_L0_FLOAT, E_PTR_*).

## Checklist for Coder
- [ ] Mirrors TS and Rust
- [ ] Uses canonical bytes (no JSON.stringify)
- [ ] Final state ends in r0
- [ ] JSON Pointers start with "/"
- [ ] Effects NF sorted unique
- [ ] Proof tags emitted when DEV_PROOFS=1 (if relevant)

## Lessons referenced
- A1: canonical JSON and hashing
- A2: cross-runtime determinism
- A3: vector semantics for delta/effect
- B2: proof tag emission rules
