# Plan for A7

## Step-by-step
1. **TypeScript ops**
   - Create `packages/tf-lang-l0-ts/src/ops/` with files for
     `dimension_eq.ts`, `lens_mod.ts`, `bounds.ts`,
     `delta_bounded.ts`, `saturate.ts`, plus `index.ts`.
   - Each function enforces integer-only semantics and mirrors
     minimal behaviour described in brief.
   - Update `packages/tf-lang-l0-ts/src/host/memory.ts` to dispatch
     new `tf://...@0.1` IDs.
   - Export ops via `packages/tf-lang-l0-ts/src/index.ts`.
2. **Rust ops**
   - Create `packages/tf-lang-l0-rs/src/ops/` with modules
     `dimension_eq.rs`, `lens_mod.rs`, `bounds.rs`,
     `delta_bounded.rs`, `saturate.rs`, and `mod.rs` re-exporting them.
   - Expose module in `packages/tf-lang-l0-rs/src/lib.rs`.
   - Extend `DummyHost::call_tf` in
     `packages/tf-lang-l0-rs/tests/vectors.rs` to call these ops.
3. **Conformance vectors**
   - Add five JSON vector files under `tests/vectors/` exercising
     each new TF: `assert_dimension_eq.json`, `lens_mod.json`,
     `assert_bounds.json`, `probe_delta_bounded.json`,
     `correct_saturate.json`.
4. **Journal**
   - Append short entry to `.codex/JOURNAL.md` noting the addition.

## Test changes
- `pnpm -C packages/tf-lang-l0-ts test`
- `pnpm -C packages/tf-lang-l0-ts vectors`
- `cargo test --manifest-path packages/tf-lang-l0-rs/Cargo.toml`

## Risks & Rollback
- **Risk:** integer checks or pointer semantics may diverge between
  TS and Rust.
- **Risk:** vector expectations may not match effect accounting.
- **Rollback:** revert new ops and vectors via `git revert` or remove
  introduced files.

## Definition of Done
- Ops implemented in TS and Rust and exported.
- Dummy hosts dispatch new `tf://` IDs.
- Five vectors added and all test commands above pass.
