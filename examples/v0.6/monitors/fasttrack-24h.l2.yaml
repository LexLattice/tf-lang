# TF-Lang · Monitors · Fast-Track 24h SLA (L2)
monitors:
  - monitor: "fasttrack.sla.start.v1"
    on: obs.stream("claims.eligibility")
    when: "@event.decision == 'allow'"
    then:
      - schedule: process.schedule(task_ref: "sla.fasttrack.deadline",
                                   trigger: { in_hours: 24, corr: "@event.corr" }) # trigger type={schemaRef:"FastTrackDeadlineTriggerV1",format:"json"}

  - monitor: "fasttrack.sla.check.v1"
    on: process.event("sla.fasttrack.deadline")
    then:
      - lookup: transform.lookup(entity: "claim", key: "@event.corr", field: "payout_ack") # out={schemaRef:"ClaimLookupV1",format:"json"}
      - branch:
          when: "@lookup.missing"
          then:
            - breach_metric: obs.emit_metric(name: "claims.fasttrack.breach", value: 1,
                                            tags: { corr: "@event.corr" }) # tags type={schemaRef:"FastTrackMetricTagsV1",format:"json"}
            - alert: interaction.request(endpoint: "api/alerts/create", method: "POST",
                                         body: { kind: "SLA_BREACH", corr: "@event.corr" }) # body type={schemaRef:"SlaAlertRequestV1",format:"json"}
          else:
            - on_time_metric: obs.emit_metric(name: "claims.fasttrack.on_time", value: 1,
                                              tags: { corr: "@event.corr" }) # tags type={schemaRef:"FastTrackMetricTagsV1",format:"json"}
